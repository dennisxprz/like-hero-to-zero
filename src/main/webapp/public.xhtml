<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>CO‚ÇÇ-Aussto√ü nach Land</title>
</h:head>

<h:body>
    <h:form>

        <h2>CO‚ÇÇ-Emissionen weltweit</h2>

        <!-- ‚úÖ Erfolgs-/Fehlermeldungen -->
        <h:messages globalOnly="true" layout="table" style="color: red;" />

        <!-- üåç L√§nderauswahl -->
        <h:panelGrid columns="2" cellpadding="5">

            <h:outputLabel value="Land ausw√§hlen:" for="countrySelect" />

            <h:selectOneMenu id="countrySelect" value="#{emissionBean.selectedCountry}">
                <f:selectItem itemLabel="-- Bitte w√§hlen --" itemValue="" />
                <f:selectItems value="#{emissionBean.distinctCountries}"
                               var="country"
                               itemValue="#{country}"
                               itemLabel="#{country}" />
            </h:selectOneMenu>

            <h:outputLabel />
            <h:commandButton value="Anzeigen" action="#{emissionBean.fetchLatestData}">
                <f:ajax execute="@form" render="@form" />
            </h:commandButton>

        </h:panelGrid>

        <br/>

        <!-- ‚úÖ CO‚ÇÇ-Daten anzeigen -->
        <h:panelGroup rendered="#{not empty emissionBean.latestData}">
            <h3 style="color: darkgreen;">Aktuellster Eintrag f√ºr: #{emissionBean.latestData.country}</h3>
            <p>Jahr: #{emissionBean.latestData.year}</p>
            <p>CO‚ÇÇ-Wert: #{emissionBean.latestData.co2Value} Mt</p>
        </h:panelGroup>

        <!-- ‚ùå Kein Datensatz gefunden -->
        <h:panelGroup rendered="#{empty emissionBean.latestData and not empty emissionBean.selectedCountry}">
            <p style="color: red;">‚ö†Ô∏è Kein Datensatz f√ºr dieses Land gefunden.</p>
        </h:panelGroup>

    </h:form>

    <!-- Button zum Login -->
    <h:form>
        <h:commandButton value="Login f√ºr Forschende" action="login.xhtml?faces-redirect=true" />
    </h:form>

</h:body>
</html>
